id: storage_management_02
level: advanced
title: "Storage and Disk Management"
description: "Master disk partitioning, LVM, and filesystem management"
estimated_time: 50

lessons:
  - id: lesson_01
    title: "Disk Information"
    notes: |
      ðŸ’¾ Viewing Disk Information
      
      lsblk - List block devices:
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ lsblk                 - Tree view of disks
      â€¢ lsblk -f              - Show filesystems
      â€¢ lsblk -p              - Show full paths
      
      fdisk - Disk partitioning:
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ fdisk -l              - List all disks
      â€¢ fdisk /dev/sda        - Partition disk (interactive)
      
      parted - Advanced partitioning:
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ parted -l             - List partitions
      â€¢ parted /dev/sda print - Show disk info
      
      blkid - Block device attributes:
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ blkid                 - Show all UUIDs
      â€¢ blkid /dev/sda1       - Show specific partition
    
    exercises:
      - id: ex_01
        type: command
        description: "List all block devices"
        command: lsblk
        expected_pattern: "NAME|disk|part"
        hints:
          - "Use: lsblk"
        points: 15
      
      - id: ex_02
        type: command
        description: "Show filesystem types"
        command: lsblk -f
        hints:
          - "Use: lsblk -f"
        points: 15

  - id: lesson_02
    title: "Filesystem Operations"
    notes: |
      ðŸ“ Filesystem Management
      
      mkfs - Create filesystem:
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ mkfs.ext4 /dev/sdb1   - Create ext4
      â€¢ mkfs.xfs /dev/sdb1    - Create XFS
      â€¢ mkfs -t ext4 /dev/sdb1
      
      mount/umount - Mount filesystems:
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ mount /dev/sdb1 /mnt  - Mount
      â€¢ mount -t ext4 /dev/sdb1 /mnt
      â€¢ umount /mnt           - Unmount
      â€¢ mount -a              - Mount all in /etc/fstab
      
      /etc/fstab - Persistent mounts:
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      Format: device mountpoint fstype options dump pass
      Example: /dev/sdb1 /data ext4 defaults 0 2
      
      fsck - Filesystem check:
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ fsck /dev/sdb1        - Check filesystem
      â€¢ fsck -y /dev/sdb1     - Auto-fix errors
    
    exercises:
      - id: ex_03
        type: command
        description: "Show currently mounted filesystems"
        command: mount | grep -E '^/dev'
        expected_pattern: "/dev"
        hints:
          - "Use: mount"
          - "Filter with: mount | grep '^/dev'"
        points: 15

  - id: lesson_03
    title: "LVM Basics"
    notes: |
      ðŸ”§ Logical Volume Management
      
      Physical Volumes (PV):
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ pvcreate /dev/sdb     - Create PV
      â€¢ pvdisplay             - Show PVs
      â€¢ pvs                   - List PVs (short)
      
      Volume Groups (VG):
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ vgcreate vg01 /dev/sdb - Create VG
      â€¢ vgdisplay             - Show VGs
      â€¢ vgs                   - List VGs (short)
      â€¢ vgextend vg01 /dev/sdc - Add disk to VG
      
      Logical Volumes (LV):
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ lvcreate -L 10G -n lv01 vg01  - Create 10GB LV
      â€¢ lvdisplay             - Show LVs
      â€¢ lvs                   - List LVs (short)
      â€¢ lvextend -L +5G /dev/vg01/lv01 - Extend LV
      â€¢ lvresize -L 20G /dev/vg01/lv01 - Resize LV
      
      Complete Example:
      â€¢ pvcreate /dev/sdb
      â€¢ vgcreate vg_data /dev/sdb
      â€¢ lvcreate -L 50G -n lv_data vg_data
      â€¢ mkfs.ext4 /dev/vg_data/lv_data
      â€¢ mount /dev/vg_data/lv_data /data
    
    exercises:
      - id: ex_04
        type: command
        description: "List all volume groups"
        command: sudo vgs || vgs 2>/dev/null || echo "No VGs or no permission"
        hints:
          - "Use: sudo vgs"
        points: 20

completion_criteria:
  min_exercises_completed: 3
  min_score: 50

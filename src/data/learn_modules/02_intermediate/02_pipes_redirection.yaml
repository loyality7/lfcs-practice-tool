id: pipes_redirection_02
level: intermediate
title: "Pipes and Redirection"
description: "Master command chaining and I/O redirection"
estimated_time: 30

lessons:
  - id: lesson_01
    title: "Understanding Pipes"
    notes: |
      ðŸ”— Pipes - Connecting Commands
      
      The pipe | sends output from one command to another!
      
      Syntax: command1 | command2 | command3
      
      Common Patterns:
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ ls -l | grep ".txt"           - Filter ls output
      â€¢ cat file | grep "error"       - Search in file
      â€¢ ps aux | grep "apache"        - Find process
      â€¢ history | tail -20            - Last 20 commands
      â€¢ cat file | wc -l              - Count lines
      â€¢ ls | sort | uniq              - Unique sorted list
      
      Real Examples:
      â€¢ cat /var/log/syslog | grep "error" | wc -l
      â€¢ ps aux | grep "python" | awk '{print $2}'
      â€¢ ls -l | awk '{sum+=$5} END {print sum}'
    
    exercises:
      - id: ex_01
        type: command
        description: "List files and count them"
        command: ls | wc -l
        expected_pattern: "\\d+"
        hints:
          - "Pipe ls output to wc -l"
          - "Type: ls | wc -l"
        points: 15
      
      - id: ex_02
        type: command
        description: "Find lines with 'root' in /etc/passwd and count them"
        command: grep "root" /etc/passwd | wc -l
        expected_pattern: "\\d+"
        hints:
          - "Use: grep \"root\" /etc/passwd | wc -l"
        points: 20

  - id: lesson_02
    title: "Output Redirection"
    notes: |
      ðŸ“¤ Redirecting Output
      
      Redirect output to files instead of screen!
      
      Operators:
      â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ >   - Redirect output (overwrite)
      â€¢ >>  - Redirect output (append)
      â€¢ 2>  - Redirect errors
      â€¢ &>  - Redirect both output and errors
      â€¢ <   - Redirect input
      
      Examples:
      â€¢ ls > files.txt              - Save output
      â€¢ echo "log" >> log.txt       - Append to file
      â€¢ command 2> errors.txt       - Save errors only
      â€¢ command &> all.txt          - Save everything
      â€¢ wc -l < file.txt            - Use file as input
      
      Useful Patterns:
      â€¢ command > /dev/null         - Discard output
      â€¢ command 2>&1                - Redirect errors to output
      â€¢ command > out.txt 2>&1      - Save both to file
    
    exercises:
      - id: ex_03
        type: command
        description: "Save list of files to files.txt"
        command: ls > files.txt
        validation:
          type: file
          path: "./files.txt"
        hints:
          - "Use: ls > files.txt"
        points: 15
      
      - id: ex_04
        type: command
        description: "Append current date to files.txt"
        command: date >> files.txt
        validation:
          type: command
          command: "grep -E '[0-9]{4}' files.txt"
        hints:
          - "Use >> to append"
          - "Type: date >> files.txt"
        points: 15

  - id: lesson_03
    title: "Advanced Piping"
    notes: |
      ðŸš€ Advanced Pipe Techniques
      
      tee - Write to file AND screen:
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ command | tee file.txt
      â€¢ command | tee -a file.txt  (append)
      
      xargs - Build commands from input:
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ find . -name "*.txt" | xargs rm
      â€¢ cat files.txt | xargs -I {} cp {} /backup/
      
      Command Substitution:
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ echo "Today is $(date)"
      â€¢ files=$(ls *.txt)
      â€¢ cp file.txt backup-$(date +%Y%m%d).txt
    
    exercises:
      - id: ex_05
        type: command
        description: "List files and save to list.txt while displaying"
        command: ls | tee list.txt
        validation:
          type: file
          path: "./list.txt"
        hints:
          - "Use: ls | tee list.txt"
          - "tee writes to file AND displays"
        points: 20

completion_criteria:
  min_exercises_completed: 4
  min_score: 65

id: complex_network_setup_01
category: networking
difficulty: hard
distribution: ubuntu
task: |
  Configure a static IP address on interface eth0 with the following requirements:
  - IP address: 192.168.100.50/24
  - Default gateway: 192.168.100.1
  - DNS nameserver: 8.8.8.8
  
  Ensure the interface is up and the configuration persists across reboots.
  
  Hint: Use netplan for Ubuntu systems. Configuration files are in /etc/netplan/

setup_commands:
  - "ip link add eth0 type dummy || true"
  - "ip link set eth0 up || true"

validation:
  checks:
    - type: custom
      script_path: /validation/validate_network_config.sh
      args: ["eth0", "192.168.100.50", "192.168.100.1"]
      expected_exit_code: 0
      description: "Validate complete network configuration"
    
    - type: file
      path: /etc/netplan/01-netcfg.yaml
      should_exist: true
      description: "Netplan configuration file exists"
    
    - type: command
      command: "ip addr show eth0 | grep 'inet '"
      regex_match: "192\\.168\\.100\\.50"
      description: "IP address is configured on interface"

points: 100
hints:
  - "Use 'ip addr' to check current IP configuration"
  - "Netplan configuration files use YAML format"
  - "Apply netplan changes with 'netplan apply'"
  - "Check DNS configuration in /etc/resolv.conf"
tags:
  - networking
  - static-ip
  - netplan
  - dns

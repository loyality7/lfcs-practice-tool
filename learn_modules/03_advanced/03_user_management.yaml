id: user_management_03
level: advanced
title: "Advanced User & Group Management"
description: "Master user administration, sudo, and access control"
estimated_time: 40

lessons:
  - id: lesson_01
    title: "User Management"
    notes: |
      ðŸ‘¥ Managing Users
      
      useradd - Create user:
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ useradd john          - Basic user creation
      â€¢ useradd -m john       - Create with home directory
      â€¢ useradd -m -s /bin/bash john  - Specify shell
      â€¢ useradd -m -G sudo john - Add to group
      â€¢ useradd -m -e 2024-12-31 john - Set expiry
      
      usermod - Modify user:
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ usermod -aG sudo john - Add to group (append)
      â€¢ usermod -s /bin/zsh john - Change shell
      â€¢ usermod -L john       - Lock account
      â€¢ usermod -U john       - Unlock account
      â€¢ usermod -e 2024-12-31 john - Set expiry
      
      userdel - Delete user:
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ userdel john          - Delete user
      â€¢ userdel -r john       - Delete user + home
      
      passwd - Password management:
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ passwd john           - Set password
      â€¢ passwd -l john        - Lock password
      â€¢ passwd -u john        - Unlock password
      â€¢ passwd -e john        - Expire password
    
    exercises:
      - id: ex_01
        type: command
        description: "List all users from /etc/passwd"
        command: "cut -d: -f1 /etc/passwd | head -10"
        hints:
          - "Use: cut -d: -f1 /etc/passwd"
          - "Add | head -10 to see first 10"
        points: 15
      
      - id: ex_02
        type: command
        description: "Show current user's groups"
        command: groups
        hints:
          - "Use: groups"
        points: 10

  - id: lesson_02
    title: "Group Management"
    notes: |
      ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦ Managing Groups
      
      groupadd - Create group:
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ groupadd developers   - Create group
      â€¢ groupadd -g 1500 developers - Specify GID
      
      groupmod - Modify group:
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ groupmod -n newname oldname - Rename
      â€¢ groupmod -g 1600 developers - Change GID
      
      groupdel - Delete group:
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ groupdel developers   - Delete group
      
      gpasswd - Group password/members:
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ gpasswd -a john developers - Add user to group
      â€¢ gpasswd -d john developers - Remove user
      â€¢ gpasswd -A admin developers - Set admin
      
      id - User/group info:
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ id                    - Current user
      â€¢ id john               - Specific user
      â€¢ id -u john            - User ID only
      â€¢ id -g john            - Primary group ID
      â€¢ id -G john            - All group IDs
    
    exercises:
      - id: ex_03
        type: command
        description: "Show your user ID and group IDs"
        command: id
        expected_pattern: "uid|gid"
        hints:
          - "Use: id"
        points: 10

  - id: lesson_03
    title: "Sudo Configuration"
    notes: |
      ðŸ” Sudo Access Control
      
      sudo - Execute as superuser:
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ sudo command          - Run as root
      â€¢ sudo -u user command  - Run as specific user
      â€¢ sudo -i               - Login shell as root
      â€¢ sudo -s               - Shell as root
      â€¢ sudo -l               - List allowed commands
      
      visudo - Edit sudoers file:
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ visudo                - Safely edit /etc/sudoers
      
      Sudoers syntax:
      â€¢ user ALL=(ALL:ALL) ALL
      â€¢ %group ALL=(ALL:ALL) ALL
      â€¢ user ALL=(ALL) NOPASSWD: ALL
      â€¢ user ALL=/usr/bin/systemctl
      
      Examples:
      â€¢ john ALL=(ALL:ALL) ALL  - Full sudo access
      â€¢ %developers ALL=/usr/bin/systemctl restart nginx
      â€¢ admin ALL=(ALL) NOPASSWD: /usr/bin/apt
    
    exercises:
      - id: ex_04
        type: command
        description: "List your sudo privileges"
        command: sudo -l 2>/dev/null || echo "No sudo access"
        hints:
          - "Use: sudo -l"
        points: 15

completion_criteria:
  min_exercises_completed: 3
  min_score: 40

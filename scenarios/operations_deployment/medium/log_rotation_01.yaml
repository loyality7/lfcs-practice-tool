id: ops_medium_003
category: operations_deployment
difficulty: medium
task: |
  Create a logrotate configuration file at /etc/logrotate.d/testapp for /var/log/testapp.log.
  Configure it to rotate daily, keep 7 days of logs, and compress old logs.

points: 15
time_limit: 300

setup_commands:
  - "rm -f /etc/logrotate.d/testapp 2>/dev/null || true"

validation:
  checks:
    - type: file
      path: "/etc/logrotate.d/testapp"
      should_exist: true
      description: "Logrotate config exists"
    
    - type: command
      command: "grep 'daily' /etc/logrotate.d/testapp"
      regex_match: "daily"
      description: "Daily rotation configured"
    
    - type: command
      command: "grep 'rotate 7' /etc/logrotate.d/testapp"
      regex_match: "rotate 7"
      description: "Keep 7 days configured"
    
    - type: command
      command: "grep 'compress' /etc/logrotate.d/testapp"
      regex_match: "compress"
      description: "Compression enabled"

hints:
  - "Create file with log path and rotation options"
  - "Format: /var/log/testapp.log { daily rotate 7 compress }"

tags:
  - operations_deployment
  - logrotate
  - logs

id: cmd_hard_003
category: essential_commands
difficulty: hard
task: |
  Create a file /tmp/{{ random_file }} with multiple lines containing 'DEBUG=true'.
  Use sed to replace all occurrences of 'DEBUG=true' with 'DEBUG=false'.
  Save the result to /tmp/{{ random_file }}.

points: 20
time_limit: 600

setup_commands:
  - "rm -f /tmp/{{ random_file }} /tmp/{{ random_file }} 2>/dev/null || true"
  - "echo -e 'DEBUG=true\\nLOG_LEVEL=info\\nDEBUG=true\\nVERBOSE=false' > /tmp/{{ random_file }}"

validation:
  checks:
    - type: file
      path: "/tmp/{{ random_file }}"
      should_exist: true
      description: "Output file exists"
    
    - type: command
      command: "grep 'DEBUG=false' /tmp/{{ random_file }} | wc -l"
      expected_output: "2"
      description: "File contains 2 occurrences of DEBUG=false"
    
    - type: command
      command: "grep 'DEBUG=true' /tmp/{{ random_file }} || echo 'not_found'"
      expected_output: "not_found"
      description: "No DEBUG=true remains"

hints:
  - "Use sed with global replacement"
  - "sed 's/DEBUG=true/DEBUG=false/g' /tmp/{{ random_file }} > /tmp/{{ random_file }}"

tags:
  - essential_commands
  - sed
  - text_processing
  - advanced
